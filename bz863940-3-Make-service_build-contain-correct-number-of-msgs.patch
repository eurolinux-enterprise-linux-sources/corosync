From 1cea171c4d8f9dd19b4995f96842111e41f23d6c Mon Sep 17 00:00:00 2001
From: Jan Friesse <jfriesse@redhat.com>
Date: Mon, 1 Oct 2012 14:46:54 +0200
Subject: [PATCH] Make service_build contain correct number of msgs

Signed-off-by: Jan Friesse <jfriesse@redhat.com>
Reviewed-by: Fabio M. Di Nitto <fdinitto@redhat.com>
(backported from commit a273be58ae97f192712661b2f5a19f8d89183065)
---
 exec/syncv2.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/exec/syncv2.c b/exec/syncv2.c
index 267f915..5e59190 100644
--- a/exec/syncv2.c
+++ b/exec/syncv2.c
@@ -510,11 +510,11 @@ static void sync_servicelist_build_enter (
 		my_service_list_entries += 1;
 	}
 
-	for (i = 0; i < my_service_list[i].service_id; i++) {
+	for (i = 0; i < my_service_list_entries; i++) {
 		service_build.service_list[i] =
 			my_service_list[i].service_id;
 	}
-	service_build.service_list_entries = i;
+	service_build.service_list_entries = my_service_list_entries;
 
 	service_build_message_transmit (&service_build);
 }
-- 
1.7.1

