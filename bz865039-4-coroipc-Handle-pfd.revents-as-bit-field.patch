From b6aabed698d34e4e79e03a3354e59a2d0121e692 Mon Sep 17 00:00:00 2001
From: Jan Friesse <jfriesse@redhat.com>
Date: Mon, 10 Dec 2012 10:35:59 +0100
Subject: [PATCH] coroipc: Handle pfd.revents as bit-field

Signed-off-by: Jan Friesse <jfriesse@redhat.com>
Reviewed-by: Fabio M. Di Nitto <fdinitto@redhat.com>
---
 include/corosync/coroipc_ipc.h |    4 +---
 1 files changed, 1 insertions(+), 3 deletions(-)

diff --git a/include/corosync/coroipc_ipc.h b/include/corosync/coroipc_ipc.h
index ebba342..99c8bd0 100644
--- a/include/corosync/coroipc_ipc.h
+++ b/include/corosync/coroipc_ipc.h
@@ -243,9 +243,7 @@ retry_poll:
 			}
 
 			if (res == 1) {
-				if (pfd.revents == POLLERR ||
-					pfd.revents == POLLHUP ||
-					pfd.revents == POLLNVAL) {
+				if (pfd.revents & (POLLERR|POLLHUP|POLLNVAL)) {
 
 					return (CS_ERR_LIBRARY);
 				}
-- 
1.7.1

